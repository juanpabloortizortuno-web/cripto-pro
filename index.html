<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>CDC FUTURO-PRO</title>
<style>
:root {
  --bg-main: #0f1115;
  --bg-card: #1a1d24;
  --accent-yellow: #fcd535;
  --accent-green: #00c853;
  --accent-red: #ff5252;
  --accent-blue: #2196f3;
  --text-light: #e0e0e0;
}
body { margin:0; font-family:'Segoe UI',sans-serif; background:var(--bg-main); color:var(--text-light); overflow-x:hidden; }
header { background:var(--bg-card); padding:10px 15px; border-bottom:2px solid var(--accent-yellow); display:flex; flex-direction:column; align-items:center; }
.header-top { display:flex; width:100%; justify-content:space-between; align-items:center; }
header h1 { margin:0; font-size:16px; color:var(--accent-yellow); text-align:center; line-height:1.1; font-weight:bold; }
#menuToggle { background:var(--accent-yellow); border:none; border-radius:6px; width:35px; height:35px; font-size:18px; cursor:pointer; }
.header-links { display:flex; gap:8px; width:100%; margin-top:10px; justify-content:center; }
.btn-small { padding:5px 10px; border-radius:4px; font-weight:bold; text-decoration:none; font-size:11px; text-align:center; }
#blockScreen { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(15,17,21,0.98); z-index:9999; flex-direction:column; justify-content:center; align-items:center; text-align:center; padding:20px; }
.container { display:flex; height:calc(100vh - 110px); position:relative; }
.sidebar { width:300px; background:var(--bg-card); overflow-y:auto; border-right:2px solid var(--accent-yellow); transition: transform 0.3s ease; z-index:900; position:absolute; height:100%; left:0; }
.sidebar.hidden { transform:translateX(-100%); }
.main { flex:1; padding:15px; overflow-y:auto; width:100%; }
#search { width:90%; margin:10px auto; display:block; padding:10px; border-radius:6px; border:none; background:#2c2f38; color:white; }
table { width:100%; border-collapse:collapse; }
th { background:var(--accent-yellow); color:black; padding:8px; font-size:11px; position:sticky; top:0; }
td { padding:12px 8px; text-align:center; border-bottom:1px solid #333; font-size:13px; }
.card { background:var(--bg-card); padding:20px; border-radius:12px; box-shadow:0 0 20px rgba(0,0,0,0.4); margin-bottom:10px; }
.whatsapp-btn { display:block; margin-top:12px; padding:12px; text-align:center; background:#25D366; color:white; font-weight:bold; border-radius:6px; text-decoration:none; }
.btn-binance { display:block; margin-top:8px; padding:10px; text-align:center; background:var(--accent-blue); color:white; font-weight:bold; border-radius:6px; text-decoration:none; font-size:12px; }
#statusBar { text-align:center; padding:6px; background:#1f222a; font-size:12px; color:var(--accent-yellow); }
.recommend { font-weight:bold; font-size:14px; margin-top:8px; }
</style>
</head>
<body>

<div id="blockScreen">
  <h1 style="color:var(--accent-red)">SISTEMA BLOQUEADO ‚ùå</h1>
  <p>Has agotado tus 10 intentos gratuitos.</p>
  <p>Para seguir usando <b>CDC FUTURO-PRO</b>, debes adquirir una licencia.</p>
  <a href="https://wa.me/59177244375" class="whatsapp-btn" style="width:200px">ADQUIRIR LICENCIA PRO</a>
  <div id="licenseAreaBlock" style="margin-top:20px;">
    <input id="premiumCodeBlock" placeholder="Pega tu c√≥digo aqu√≠" style="padding:10px; border-radius:5px; border:none;">
    <button onclick="activateFromBlock()" style="padding:10px; background:var(--accent-yellow); border:none; border-radius:5px; font-weight:bold;">ACTIVAR</button>
  </div>
</div>

<header>
  <div class="header-top">
    <button id="menuToggle">‚ò∞</button>
    <h1>CDC<br>FUTURO-PRO</h1>
    <div style="width:35px;"></div>
  </div>
  <div class="header-links">
    <a class="btn-small" href="https://www.tiktok.com/@chicodelascomputadoras" target="_blank" style="background:#FF0050; color:white;">TikTok</a>
    <a class="btn-small" href="https://juanpabloortizortuno-web.github.io/licencia-pro/" target="_blank" style="background:#fcd535;color:#000;">LICENCIA PRO</a>
  </div>
</header>

<div id="statusBar">Inicializando...</div>

<div class="container">
  <div class="sidebar hidden" id="sidebar">
    <input id="search" placeholder="üîç Buscar moneda...">
    <table>
      <thead>
        <tr><th>MONEDA</th><th>SUBI√ì 48H</th><th>VA POR</th></tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>
  <div class="main">
    <div id="details" class="card">Selecciona una moneda.</div>
    <div id="binanceLinks">
      <a id="linkBinanceWeb" class="btn-binance" target="_blank" style="display:none;">üåê Binance Web</a>
      <a id="linkBinanceIOS" class="btn-binance" target="_blank" style="display:none;">üì± App (iOS)</a>
      <a id="linkBinanceAndroid" class="btn-binance" target="_blank" style="display:none;">üì± App (Android)</a>
    </div>
    <a href="https://wa.me/59177244375" target="_blank" class="whatsapp-btn">üì≤ WHATSAPP SOPORTE</a>
  </div>
</div>

<script>
const sidebar = document.getElementById("sidebar");
const statusBar = document.getElementById("statusBar");
document.getElementById("menuToggle").onclick = () => { sidebar.classList.toggle("hidden"); };

let clickCount = parseInt(localStorage.getItem("clickCount")||"0");
let premiumActive = localStorage.getItem("premiumActive")==="1";

function checkLimit() {
  if(!premiumActive && clickCount>=10){ document.getElementById("blockScreen").style.display="flex"; return true; }
  return false;
}

async function getAllUSDTSymbols(){
  try {
    const [spot,futures]=await Promise.all([
      fetch("https://api.binance.com/api/v3/exchangeInfo").then(r=>r.json()),
      fetch("https://fapi.binance.com/fapi/v1/exchangeInfo").then(r=>r.json())
    ]);
    return [...spot.symbols.filter(s=>s.status==="TRADING"&&s.quoteAsset==="USDT").map(s=>({symbol:s.symbol,type:"spot"})),
            ...futures.symbols.filter(s=>s.status==="TRADING"&&s.quoteAsset==="USDT").map(s=>({symbol:s.symbol,type:"futures"}))];
  }catch(e){ return []; }
}

async function calculate48h(symbol,type){
  const base = type==="futures"?"https://fapi.binance.com/fapi/v1":"https://api.binance.com/api/v3";
  try{
    const [klines,ticker]=await Promise.all([
      fetch(`${base}/klines?symbol=${symbol}&interval=1h&limit=50`).then(r=>r.json()),
      fetch(`${base}/ticker/24hr?symbol=${symbol}`).then(r=>r.json())
    ]);
    const open48=parseFloat(klines[0][1]), closeNow=parseFloat(klines[47][4]);
    const change48 = ((closeNow-open48)/open48)*100;
    if(change48<10) return null;
    const closes = klines.map(k=>parseFloat(k[4]));
    function EMA(prices,period){ const k=2/(period+1); let ema=prices[0]; for(let i=1;i<prices.length;i++) ema=prices[i]*k + ema*(1-k); return ema;}
    const ema20 = EMA(closes.slice(-20),20), ema50=EMA(closes,50);
    let rec="Esperar";
    if(ema20>ema50 && closes[closes.length-1]>ema20) rec="Posible compra";
    if(ema20<ema50 && closes[closes.length-1]<ema20) rec="Posible venta";
    return {symbol,price:parseFloat(ticker.lastPrice),change24:parseFloat(ticker.priceChangePercent),change48,high:parseFloat(ticker.highPrice),low:parseFloat(ticker.lowPrice),volume:parseFloat(ticker.quoteVolume),vaPor:((ticker.lastPrice-ticker.lowPrice)/(ticker.highPrice-ticker.lowPrice))*100, ema20, ema50, rec, type};
  }catch(e){ return null; }
}

async function loadPRO(){
  if(checkLimit()) return;
  statusBar.innerText = "Escaneando... Intentos: "+clickCount+"/10";
  const symbols = await getAllUSDTSymbols();
  const results = (await Promise.all(symbols.map(s=>calculate48h(s.symbol,s.type)))).filter(x=>x!==null).sort((a,b)=>b.change48-a.change48);
  const tableBody = document.getElementById("tableBody");
  tableBody.innerHTML="";
  results.forEach(c=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`<td><b>${c.symbol.replace("USDT","")}</b></td>
                  <td style="color:#00c853">${c.change48.toFixed(1)}%</td>
                  <td style="color:orange">Va por ${c.vaPor.toFixed(1)}%</td>`;
    tr.onclick=()=>{ if(checkLimit()) return; clickCount++; localStorage.setItem("clickCount",clickCount); showDetails(c); sidebar.classList.add("hidden"); };
    tableBody.appendChild(tr);
  });
}

function showDetails(c){
  document.getElementById("details").innerHTML=`
    <h2 style="color:#fcd535">${c.symbol}</h2>
    <p><b>Precio:</b> $${c.price}</p>
    <p style="color:${c.change24>=0?'#00c853':'#ff5252'}"><b>24H:</b> ${c.change24.toFixed(2)}%</p>
    <p style="color:#00c853"><b>Subida 48H:</b> ${c.change48.toFixed(2)}%</p>
    <p style="color:orange">Va por ${c.vaPor.toFixed(1)}% hacia su m√°ximo de 24H</p>
    <p><b>EMA20:</b> ${c.ema20.toFixed(2)} | <b>EMA50:</b> ${c.ema50.toFixed(2)}</p>
    <p class="recommend" style="color:${c.rec.includes('compra')?'#00c853':'#ff5252'}">${c.rec}</p>
    <p style="font-size:12px; opacity:0.7">Volumen: ${(c.volume/1000000).toFixed(2)}M</p>`;
  document.querySelectorAll(".btn-binance").forEach(b=>b.style.display="block");
  document.getElementById("linkBinanceWeb").href=`https://www.binance.com/es/futures/${c.symbol}`;
  document.getElementById("linkBinanceIOS").href=`binance://futures/trade?symbol=${c.symbol}`;
  document.getElementById("linkBinanceAndroid").href=`binance://futures/trade?symbol=${c.symbol}`;
}

function activateFromBlock(){
  const code=document.getElementById("premiumCodeBlock").value.trim();
  try{ atob(code); localStorage.setItem("premiumActive","1"); location.reload(); }catch(e){ alert("C√≥digo inv√°lido"); }
}

document.getElementById("search").oninput=(e)=>{
  const val=e.target.value.toUpperCase();
  document.querySelectorAll("#tableBody tr").forEach(tr=>tr.style.display=tr.innerText.includes(val)?"":"none");
};

checkLimit(); loadPRO(); setInterval(loadPRO,10000);
</script>
</body>
</html>
