<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>üöÄ CDC FUTURO CRIPTO | PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root {
  --bg-main: #121212;
  --bg-card: #1e1e28;
  --accent-yellow: #fcd535;
  --accent-blue: #0099ff;
  --accent-green: #4caf50;
  --accent-red: #ff5252;
  --text-light: #e0e0e0;
}

body {
  margin: 0; font-family: sans-serif;
  background: var(--bg-main); color: var(--text-light);
  overflow: hidden;
}

header {
  background: var(--bg-card); padding: 15px;
  border-bottom: 2px solid var(--accent-yellow);
  display: flex; justify-content: center; align-items: center;
}

header h1 { margin: 0; color: var(--accent-yellow); font-size: 18px; font-weight: bold; }

.menu-btn {
  position: absolute; left: 12px;
  background: var(--accent-yellow); border: none;
  border-radius: 6px; width: 38px; height: 38px;
  font-size: 20px; cursor: pointer;
}

#statusBar {
  text-align: center; padding: 8px; background: #252531;
  border-bottom: 2px solid var(--accent-blue);
  font-weight: bold; font-size: 13px;
}

.container { display: flex; height: calc(100vh - 110px); position: relative; }

/* SIDEBAR */
.sidebar {
  width: 320px; background: var(--bg-card);
  border-right: 2px solid var(--accent-yellow);
  display: flex; flex-direction: column;
  transition: transform 0.3s ease; z-index: 900;
}

.sidebar.hidden { transform: translateX(-100%); position: absolute; }

.table-container { overflow-y: auto; flex: 1; }

/* MAIN */
.main { flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; }

input {
  width: calc(100% - 30px); margin: 10px 15px;
  padding: 12px; border-radius: 8px; border: none;
  background: #2c2c3a; color: white;
}

table { width: 100%; border-collapse: collapse; }
th { position: sticky; top: 0; background: var(--accent-yellow); color: #000; padding: 10px; font-size: 12px; }
td { padding: 10px; text-align: center; border-bottom: 1px solid #333; font-size: 13px; }

/* BOTONES MEJORADOS */
.btn-action {
  width: 100%; padding: 18px; border-radius: 12px; border: none;
  font-weight: bold; cursor: pointer; font-size: 16px;
  text-decoration: none; display: block; text-align: center;
  margin-bottom: 15px; box-sizing: border-box;
}

.btn-binance { background: var(--accent-blue); color: #fff; }
.btn-whatsapp { background: #25D366; color: #fff; border: 2px solid #1da851; }
.btn-premium { background: var(--accent-yellow); color: #000; }

#details {
  background: #252531; padding: 15px; border-radius: 12px;
  margin-bottom: 15px; border-left: 5px solid var(--accent-yellow);
}

.grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
.item { background: #1a1a24; padding: 8px; border-radius: 5px; }
.green { color: var(--accent-green); }
.red { color: var(--accent-red); }

@media (max-width: 768px) {
  .sidebar { position: absolute; left: 0; top: 0; height: 100%; width: 280px; }
}
</style>
</head>

<body>

<header>
  <button class="menu-btn" id="menuToggle">‚¨Ö</button>
  <h1>üöÄ CDC FUTURO CRIPTO</h1>
</header>

<div id="statusBar">Cargando mercado...</div>

<div class="container">

  <div class="sidebar" id="sidebar">
    <input id="search" placeholder="üîç Buscar moneda...">
    <div class="table-container">
      <table>
        <thead><tr><th>MONEDA</th><th>% M√ÅX</th><th>SE√ëAL</th></tr></thead>
        <tbody id="futuresTable"></tbody>
      </table>
    </div>
  </div>

  <div class="main">
    <div id="details">
      <p style="text-align:center;">Selecciona una moneda para analizar</p>
    </div>

    <!-- Botones Binance Web / iOS / Android -->
    <a id="linkBinanceWeb" class="btn-action btn-binance" style="display:none;" target="_blank">üåê Abrir en Binance Web</a>
    <a id="linkBinanceIOS" class="btn-action btn-binance" style="display:none;" target="_blank">üì± Abrir en Binance iOS</a>
    <a id="linkBinanceAndroid" class="btn-action btn-binance" style="display:none;" target="_blank">ü§ñ Abrir en Binance Android</a>

    <div style="margin-top:20px; border-top:1px solid #333; padding-top:20px;">
      <input id="premiumCode" placeholder="Ingresa tu c√≥digo PRO">
      <button class="btn-action btn-premium" onclick="activatePremium()">ACTIVAR LICENCIA PRO</button>
    </div>

    <a href="https://wa.me/59177068807?text=Hola!%20Deseo%20comprar%20mi%20Licencia%20CDC%20PRO" 
       class="btn-action btn-whatsapp" 
       target="_blank">
      üì≤ ESCR√çBENOS AL WHATSAPP
    </a>

  </div>
</div>

<script>
let currentSymbol = "";
let clickCount = parseInt(localStorage.getItem("clickCount")) || 0;

// Toggle Men√∫
document.getElementById("menuToggle").onclick = function() {
  const sb = document.getElementById("sidebar");
  sb.classList.toggle("hidden");
  this.innerText = sb.classList.contains("hidden") ? "‚û°" : "‚¨Ö";
};

function updateStatus() {
  const bar = document.getElementById("statusBar");
  if(localStorage.getItem("premiumActive") === "1") {
    bar.innerText = "‚úÖ PREMIUM ACTIVADO";
    bar.style.color = "var(--accent-green)";
  } else {
    bar.innerText = `Clics: ${clickCount} / 10`;
  }
}

async function showDetails(c) {
  if (localStorage.getItem("premiumActive") !== "1" && clickCount >= 10) {
    alert("L√≠mite de clics alcanzado. Activa tu versi√≥n PRO.");
    return;
  }
  
  if (localStorage.getItem("premiumActive") !== "1") {
    clickCount++;
    localStorage.setItem("clickCount", clickCount);
    updateStatus();
  }

  currentSymbol = c.symbol;

  // Mostrar enlaces seg√∫n dispositivo
  const btnWeb = document.getElementById("linkBinanceWeb");
  const btnIOS = document.getElementById("linkBinanceIOS");
  const btnAndroid = document.getElementById("linkBinanceAndroid");

  btnWeb.style.display = "block";
  btnWeb.href = `https://www.binance.com/es/futures/${c.symbol}?type=perpetual`;

  btnIOS.style.display = "block";
  btnIOS.href = `https://www.binance.com/m/en/futures/${c.symbol}?type=perpetual&device=ios`;

  btnAndroid.style.display = "block";
  btnAndroid.href = `https://www.binance.com/m/en/futures/${c.symbol}?type=perpetual&device=android`;

  // Mostrar detalles completos 24h
  document.getElementById("details").innerHTML = `
    <h2 style="margin:0; color:var(--accent-yellow);">${c.symbol}</h2>
    <div class="grid">
      <div class="item"><small>PRECIO ACTUAL</small><br><b>$${c.price}</b></div>
      <div class="item"><small>CAMBIO 24H</small><br><b class="${c.change>=0?'green':'red'}">${c.change}%</b></div>
      <div class="item"><small>VOLUMEN 24H</small><br><b>$${(c.volume/1000000).toFixed(2)}M</b></div>
      <div class="item"><small>M√çNIMO 24H</small><br><b>$${c.low}</b></div>
      <div class="item"><small>M√ÅXIMO 24H</small><br><b>$${c.high}</b></div>
      <div class="item"><small>ESTADO</small><br><b class="${c.dist<20?'green':'red'}">${c.dist<20?'LONG':'SHORT'}</b></div>
    </div>
  `;

  if(window.innerWidth < 768) {
    document.getElementById("sidebar").classList.add("hidden");
    document.getElementById("menuToggle").innerText = "‚û°";
  }
}

async function load() {
  try {
    const rInfo = await fetch("https://fapi.binance.com/fapi/v1/exchangeInfo");
    const dInfo = await rInfo.json();
    const activeOnes = new Set(dInfo.symbols.filter(s => s.status === "TRADING").map(s => s.symbol));

    const r = await fetch("https://api.binance.com/api/v3/ticker/24hr");
    const data = await r.json();
    const q = document.getElementById("search").value.toUpperCase();
    
    const table = document.getElementById("futuresTable");
    table.innerHTML = "";

    data.filter(c => activeOnes.has(c.symbol))
      .map(c => {
        const low = +c.lowPrice, high = +c.highPrice, price = +c.lastPrice;
        return { 
          symbol: c.symbol, price, change: +c.priceChangePercent, 
          volume: +c.quoteVolume, dist: ((price-low)/(high-low))*100, low, high
        };
      })
      .filter(c => c.price >= 0.08 && c.price <= 50 && (!q || c.symbol.includes(q)))
      .sort((a,b) => b.dist - a.dist)
      .forEach(c => {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td><b>${c.symbol.replace("USDT","")}</b></td><td>${c.dist.toFixed(1)}%</td><td class="${c.dist<20?'green':'red'}">${c.dist<20?'LONG':'SHORT'}</td>`;
        tr.onclick = () => showDetails(c);
        table.appendChild(tr);
      });
    updateStatus();
  } catch(e) { console.log("Error de conexi√≥n"); }
}

function activatePremium() {
  if(document.getElementById("premiumCode").value.length > 3) {
    localStorage.setItem("premiumActive", "1");
    location.reload();
  }
}

document.getElementById("search").oninput = load;
load();
setInterval(load, 30000);
</script>

</body>
</html>
