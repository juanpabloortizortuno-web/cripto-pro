<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>CDC FUTURO CRIPTO | Dashboard PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root {
  --bg-main: #121212;
  --bg-card: #1e1e28;
  --accent-yellow: #fcd535;
  --accent-blue: #0099ff;
  --accent-green: #4caf50;
  --accent-red: #ff5252;
  --text-light: #e0e0e0;
  --text-muted: #8a8e94;
}

body{
  margin:0;
  font-family:Arial, sans-serif;
  background: var(--bg-main);
  color: var(--text-light);
}
header{
  background: var(--bg-card);
  padding:12px;
  border-bottom:2px solid var(--accent-yellow);
  text-align:center;
}
header h1{
  margin:0;
  color: var(--accent-yellow);
  font-size:22px;
}
#statusBar{
  text-align:center;
  padding:10px;
  background: var(--bg-card);
  border-bottom:2px solid var(--accent-blue);
  font-weight:bold;
}
.container{
  display:flex;
  height:calc(100vh - 120px);
}
.sidebar{
  width:100%;
  max-width:380px;
  background: var(--bg-card);
  overflow-y:auto;
  border-right:2px solid var(--accent-yellow);
  padding-top:10px;
}
.main{
  flex:1;
  padding:12px;
  overflow-y:auto;
}
input{
  width:90%;
  margin:10px;
  padding:8px;
  border-radius:8px;
  border:none;
  background:#2c2c3a;
  color:var(--text-light);
}
table{
  width:100%;
  border-collapse:collapse;
}
th,td{
  padding:8px;
  text-align:center;
  border-bottom:1px solid #333;
}
th{
  background: var(--accent-yellow);
  color:#000;
}
tr:hover{
  background:#2c2c3a;
  cursor:pointer;
}
button{
  width:calc(100% - 24px);
  margin:8px 12px;
  padding:10px;
  border:none;
  border-radius:8px;
  background: var(--accent-yellow);
  font-size:15px;
  font-weight:bold;
  cursor:pointer;
  color:#000;
}
button:hover{
  filter:brightness(1.1);
}
.btn-binance-app{
  background: var(--accent-blue);
  color:#fff;
}
footer{
  text-align:center;
  margin-top:12px;
  font-size:14px;
}
footer a{
  color:var(--accent-yellow);
  text-decoration:none;
  font-weight:bold;
}
.green{color:var(--accent-green);font-weight:bold;}
.red{color:var(--accent-red);font-weight:bold;}
.section-title{
  padding:8px 12px;
  font-size:16px;
  color:var(--accent-blue);
  font-weight:bold;
}
</style>
</head>

<body>

<header>
  <h1>üöÄ CDC FUTURO CRIPTO</h1>
  <p style="font-size:14px;color:var(--text-muted);margin-top:4px; text-align:center;">
    <a href="https://www.tiktok.com/@chicodelascomputadoras" target="_blank" style="text-decoration:none; color:var(--accent-blue); font-weight:bold;">
      S√≠guenos en TikTok: @chicodelascomputadoras
    </a>
  </p>
</header>

<div id="statusBar"></div>

<div class="container">

  <!-- MENU IZQUIERDA -->
  <div class="sidebar">
    <input id="search" placeholder="üîç Buscar (USDT)">

    <div class="section-title">üìà FUTURES DISPONIBLES</div>
    <table>
      <thead><tr><th>Moneda</th><th>% M√°x</th><th>Se√±al</th></tr></thead>
      <tbody id="futuresTable"></tbody>
    </table>

    <div class="section-title">‚ú® TOKENS SPOT INTERESANTES</div>
    <table>
      <thead><tr><th>Token</th><th>Precio</th></tr></thead>
      <tbody id="spotTable"></tbody>
    </table>
  </div>

  <!-- DETALLES A LA DERECHA -->
  <div class="main">

    <div id="details">
      <em>Selecciona una moneda o token para ver detalles</em>
    </div>

    <!-- Botones Binance -->
    <div id="binanceButtons" style="text-align:center;margin-top:12px;">
      <button id="btnBinanceWeb" class="btn-binance-app">üåê Abrir Binance Web</button>
      <button id="btnBinanceIOS" class="btn-binance-app" style="background:#0A84FF;">üçè Abrir Binance iOS</button>
      <button id="btnBinanceAndroid" class="btn-binance-app" style="background:#3DDC84;">ü§ñ Abrir Binance Android</button>
    </div>

    <input id="premiumCode" placeholder="üîê Ingresa c√≥digo PREMIUM">
    <button onclick="activatePremium();">Activar Licencia</button>

    <footer>
      ¬øA√∫n no tienes licencia?  
      <a href="https://wa.me/59177068807" target="_blank">üì≤ WhatsApp +591 77068807</a>
    </footer>

  </div>

</div>

<script>
// ================== Detectar dispositivo ==================

function isMobileDevice() {
  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
}

const openBtnWeb = document.getElementById("btnBinanceWeb");
const openBtnIOS = document.getElementById("btnBinanceIOS");
const openBtnAndroid = document.getElementById("btnBinanceAndroid");

let currentSymbol = "";

// ================== Licencia y clics ==================

let clickCount = parseInt(localStorage.getItem("clickCount")) || 0;

function saveClickCount(){ localStorage.setItem("clickCount", clickCount); }
function hasPremium(){ return localStorage.getItem("premiumActive")==="1"; }
function updateStatus(){
  document.getElementById("statusBar").innerText = hasPremium()
    ? "‚úÖ Licencia Premium activa"
    : `‚ú≥Ô∏è Clics en monedas: ${clickCount} / 10 (sin licencia)`;
}

function canShowDetails(){ return hasPremium() || clickCount < 10; }

function showBlockedMessage(){
  document.getElementById("details").innerHTML = `
    <p class="red" style="font-weight:bold;">
      ‚ö†Ô∏è Has alcanzado el l√≠mite de 10 clics gratuitos.<br>
      Activa la licencia para acceder a m√°s detalles.
    </p>`;
}

function activatePremium(){
  const code = document.getElementById("premiumCode").value.trim();
  if(code.length<3){ alert("Ingresa un c√≥digo v√°lido."); return; }
  localStorage.setItem("premiumActive","1");
  alert("‚úîÔ∏è Licencia activada por 1 a√±o!");
  updateStatus();
}

// ================== Datos Binance ==================

const FUTURES_INFO  = "https://fapi.binance.com/fapi/v1/exchangeInfo";
const API_24H       = "https://api.binance.com/api/v3/ticker/24hr";
const FUNDING_API   = "https://fapi.binance.com/fapi/v1/premiumIndex";

let futuresSymbols = new Set();

async function loadFuturesList(){
  const r = await fetch(FUTURES_INFO);
  const j = await r.json();
  j.symbols.forEach(s=>{
    if(s.contractType==="PERPETUAL" && s.quoteAsset==="USDT" && s.status==="TRADING"){
      futuresSymbols.add(s.symbol);
    }
  });
}

async function getFunding(symbol){
  const r = await fetch(`${FUNDING_API}?symbol=${symbol}`);
  const j = await r.json();
  return (+j.lastFundingRate*100).toFixed(4);
}

// ================== Abrir Binance ==================

function openBinanceWeb(symbol){
  if(!symbol) return;
  window.open(`https://www.binance.com/es/futures/${symbol}?type=perpetual`, "_blank");
}
function openBinanceIOS(symbol){
  if(!symbol) return;
  window.open(`https://apps.apple.com/app/id1436799971`, "_blank");
}
function openBinanceAndroid(symbol){
  if(!symbol) return;
  window.open(`https://play.google.com/store/apps/details?id=com.binance.dev`, "_blank");
}

openBtnWeb.onclick = ()=>openBinanceWeb(currentSymbol);
openBtnIOS.onclick = ()=>openBinanceIOS(currentSymbol);
openBtnAndroid.onclick = ()=>openBinanceAndroid(currentSymbol);

// ================== Mostrar detalles ==================

async function showFutureDetails(c){
  if(!canShowDetails()){ showBlockedMessage(); return; }
  clickCount++;
  saveClickCount();
  updateStatus();
  currentSymbol = c.symbol;

  const funding = await getFunding(c.symbol);

  document.getElementById("details").innerHTML = `
    <h3>${c.symbol}</h3>
    <p>Precio Actual: <span class="green">${c.price}</span></p>
    <p>M√≠nimo 24h: <span class="red">${c.low}</span></p>
    <p>M√°ximo 24h: <span class="green">${c.high}</span></p>
    <p><b>Distancia al M√°x:</b> ${c.distMax.toFixed(2)}%</p>
    <p><b>Distancia al M√≠n:</b> ${((c.price - c.low)/(c.high - c.low)*100).toFixed(2)}%</p>
    <p><b>Cambio % 24h aprox:</b> ${((c.price - c.low)/c.low*100).toFixed(2)}%</p>
    <p><b>Funding Rate:</b> ${funding}%</p>
  `;
}

function renderFutureRow(c){
  const tr=document.createElement("tr");
  let signal="‚è≥";
  if(c.distMax<20) signal="üü¢ LONG (Comprar)";
  else if(c.distMax>80) signal="üî¥ SHORT (Vender)";
  tr.innerHTML=`
    <td>${c.symbol}</td>
    <td>${c.distMax.toFixed(1)}%</td>
    <td class="${c.distMax<20?'green':'red'}">${signal}</td>
  `;
  tr.onclick=()=>showFutureDetails(c);
  return tr;
}

async function showSpotDetails(c){
  if(!canShowDetails()){ showBlockedMessage(); return; }
  clickCount++;
  saveClickCount();
  updateStatus();
  currentSymbol = c.symbol;
  document.getElementById("details").innerHTML = `
    <h3>${c.symbol} (SPOT)</h3>
    <p>Precio Spot: <span class="green">${c.price}</span></p>
  `;
}

function renderSpotRow(c){
  const tr=document.createElement("tr");
  tr.innerHTML=`<td>${c.symbol}</td><td>${c.price}</td>`;
  tr.onclick=()=>showSpotDetails(c);
  return tr;
}

// ================== Cargar datos ==================

async function load(){
  await loadFuturesList();
  updateStatus();
  const r=await fetch(API_24H);
  const data=await r.json();
  const q=document.getElementById("search").value.toUpperCase();

  let futuresList=data.filter(c=>futuresSymbols.has(c.symbol))
    .map(c=>{
      const low=+c.lowPrice, high=+c.highPrice, price=+c.lastPrice;
      return {symbol:c.symbol, price, low, high, distMax:((price-low)/(high-low))*100};
    })
    .filter(c=>c.price>=0.10 && c.price<=50);
  if(q) futuresList=futuresList.filter(c=>c.symbol.includes(q));
  futuresList.sort((a,b)=>b.distMax-a.distMax);

  const ft=document.getElementById("futuresTable");
  ft.innerHTML="";
  futuresList.forEach(c=>ft.appendChild(renderFutureRow(c)));

  let spotList=data.filter(c=>c.symbol.endsWith("USDT"))
    .map(c=>({symbol:c.symbol, price:+c.lastPrice}))
    .filter(c=>c.price>=0.10 && c.price<=50);
  if(q) spotList=spotList.filter(c=>c.symbol.includes(q));
  const st=document.getElementById("spotTable");
  st.innerHTML="";
  spotList.forEach(c=>st.appendChild(renderSpotRow(c)));
}

document.getElementById("search").oninput=load;
load();
</script>

</body>
</html>
